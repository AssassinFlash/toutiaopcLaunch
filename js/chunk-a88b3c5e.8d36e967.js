(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a88b3c5e"],{"1e63":function(e,t,n){"use strict";n.r(t);n("b0c0");var a=n("7a23");Object(a["J"])("data-v-1f31fad2");var r={class:"publish-container"},c=Object(a["o"])("首页"),u=Object(a["o"])("单图"),l=Object(a["o"])("三图"),i=Object(a["o"])("无图"),o=Object(a["o"])("自动"),b=Object(a["o"])("全部");function s(e,t,n,s,d,f){var O=Object(a["N"])("router-link"),j=Object(a["N"])("a-breadcrumb-item"),p=Object(a["N"])("a-breadcrumb"),m=Object(a["N"])("a-input"),v=Object(a["N"])("a-form-item"),h=Object(a["N"])("a-textarea"),_=Object(a["N"])("a-radio"),g=Object(a["N"])("a-radio-group"),w=Object(a["N"])("a-select-option"),W=Object(a["N"])("a-select"),P=Object(a["N"])("a-button"),x=Object(a["N"])("a-form"),k=Object(a["N"])("a-card");return Object(a["G"])(),Object(a["m"])("div",r,[(Object(a["G"])(),Object(a["k"])(a["c"],null,{default:Object(a["W"])((function(){return[Object(a["p"])(k,{hoverable:"",class:"publish-title",loading:s.loading},{title:Object(a["W"])((function(){return[Object(a["p"])(p,{separator:">"},{default:Object(a["W"])((function(){return[Object(a["p"])(j,null,{default:Object(a["W"])((function(){return[Object(a["p"])(O,{to:{path:"/"}},{default:Object(a["W"])((function(){return[c]})),_:1})]})),_:1}),Object(a["p"])(j,null,{default:Object(a["W"])((function(){return[Object(a["o"])(Object(a["P"])(e.$route.params.id?"修改文章":"发布文章"),1)]})),_:1})]})),_:1})]})),default:Object(a["W"])((function(){return[Object(a["p"])(x,{ref:"publishForm",model:s.articleParams,rules:s.formRules,"label-col":s.labelCol,"wrapper-col":s.wrapperCol},{default:Object(a["W"])((function(){return[Object(a["p"])(v,{label:"标题",name:"title"},{default:Object(a["W"])((function(){return[Object(a["p"])(m,{value:s.articleParams.title,"onUpdate:value":t[0]||(t[0]=function(e){return s.articleParams.title=e}),"allow-clear":""},null,8,["value"])]})),_:1}),Object(a["p"])(v,{label:"内容",name:"content"},{default:Object(a["W"])((function(){return[Object(a["p"])(h,{value:s.articleParams.content,"onUpdate:value":t[1]||(t[1]=function(e){return s.articleParams.content=e}),"auto-size":{minRows:4,maxRows:8},"allow-clear":"",showCount:""},null,8,["value"])]})),_:1}),Object(a["p"])(v,{label:"封面"},{default:Object(a["W"])((function(){return[Object(a["p"])(g,{name:"articleImage",value:s.articleParams.cover.type,"onUpdate:value":t[2]||(t[2]=function(e){return s.articleParams.cover.type=e})},{default:Object(a["W"])((function(){return[Object(a["p"])(_,{value:1},{default:Object(a["W"])((function(){return[u]})),_:1}),Object(a["p"])(_,{value:3},{default:Object(a["W"])((function(){return[l]})),_:1}),Object(a["p"])(_,{value:0},{default:Object(a["W"])((function(){return[i]})),_:1}),Object(a["p"])(_,{value:-1},{default:Object(a["W"])((function(){return[o]})),_:1})]})),_:1},8,["value"])]})),_:1}),Object(a["p"])(v,{label:"频道",name:"channel_id"},{default:Object(a["W"])((function(){return[Object(a["p"])(W,{style:{width:"300px"},placeholder:"请选择频道",value:s.articleParams.channel_id,"onUpdate:value":t[3]||(t[3]=function(e){return s.articleParams.channel_id=e}),onChange:t[4]||(t[4]=function(e){return"0"===s.articleParams.channel_id?s.articleParams.channel_id=null:s.articleParams.channel_id})},{default:Object(a["W"])((function(){return[Object(a["p"])(w,{value:"0"},{default:Object(a["W"])((function(){return[b]})),_:1}),(Object(a["G"])(!0),Object(a["m"])(a["b"],null,Object(a["M"])(s.channels,(function(e){return Object(a["G"])(),Object(a["k"])(w,{value:e.id,key:e.id},{default:Object(a["W"])((function(){return[Object(a["o"])(Object(a["P"])(e.name),1)]})),_:2},1032,["value"])})),128))]})),_:1},8,["value"])]})),_:1}),Object(a["p"])(v,{"wrapper-col":{span:14,offset:1}},{default:Object(a["W"])((function(){return[Object(a["p"])(P,{type:"primary",onClick:t[5]||(t[5]=function(e){return s.onValidate()})},{default:Object(a["W"])((function(){return[Object(a["o"])(Object(a["P"])(e.$route.params.id?"修改":"发表"),1)]})),_:1})]})),_:1})]})),_:1},8,["model","rules","label-col","wrapper-col"])]})),_:1},8,["loading"])]})),_:1}))])}Object(a["H"])();var d=n("1da1"),f=(n("96cf"),n("6c02")),O=n("f64c"),j=n("2423");function p(){return{title:[{required:!0,message:"请输入文章标题",trigger:"blur"},{min:3,max:30,message:"文章标题字数至少为3",trigger:"change"}],content:[{required:!0,message:"请输入文章内容",trigger:"blur"}],channel_id:[{required:!0,message:"请选择文章频道"}]}}var m={name:"PublishIndex",components:{Suspense:a["c"]},setup:function(){var e=p(),t=Object(a["L"])(),n=Object(a["L"])(!1),r=Object(f["c"])(),c=Object(f["d"])(),u=Object(a["L"])([]),l=function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(j["d"])();case 2:t=e.sent,u.value=t.data.data.channels;case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=Object(a["L"])({title:"",content:"",cover:{type:0,images:[]},channel_id:null}),o=function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){var t,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]&&a[0],!r.params.id){e.next=7;break}return e.next=4,Object(j["f"])(r.params.id,i.value);case 4:O["a"].success("修改文章：".concat(i.value.title," 成功")),e.next=10;break;case 7:return e.next=9,Object(j["a"])(i.value,t);case 9:O["a"].success("发布文章：".concat(i.value.title," 成功"),3);case 10:c.push({name:"Article"}),n.value=!1;case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){t.value.validate().then((function(){o(!1)})).catch((function(e){O["a"].error("表单验证失败".concat(e),3)}))},s=function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.value=!0,e.next=3,Object(j["c"])(t);case 3:a=e.sent,delete a.data.data.id,i.value=a.data.data,n.value=!1;case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a["z"])(Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:if(!r.params.id){e.next=5;break}return e.next=5,s(r.params.id);case 5:case"end":return e.stop()}}),e)})))),{labelCol:{style:{width:"50px"}},wrapperCol:{span:"14"},formRules:e,publishForm:t,loading:n,articleParams:i,channels:u,onValidate:b}}};n("73d2");m.render=s,m.__scopeId="data-v-1f31fad2";t["default"]=m},2423:function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return i})),n.d(t,"f",(function(){return o})),n.d(t,"g",(function(){return b}));var a=n("b775"),r=function(e){return Object(a["a"])({method:"GET",url:"/mp/v1_0/articles",params:e})},c=function(){return Object(a["a"])({method:"GET",url:"/mp/v1_0/channels"})},u=function(e){return Object(a["a"])({method:"DELETE",url:"/mp/v1_0/articles/".concat(e)})},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(a["a"])({method:"POST",url:"/mp/v1_0/articles",params:{draft:t},data:e})},i=function(e){return Object(a["a"])({method:"GET",url:"/mp/v1_0/articles/".concat(e)})},o=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(a["a"])({method:"PUT",url:"/mp/v1_0/articles/".concat(e),params:{draft:n},data:t})},b=function(e,t){return Object(a["a"])({method:"PUT",url:"/mp/v1_0/comments/status",params:{article_id:e},data:{allow_comment:t}})}},"3cc4":function(e,t,n){},"73d2":function(e,t,n){"use strict";n("3cc4")}}]);
//# sourceMappingURL=chunk-a88b3c5e.8d36e967.js.map